{% extends "base.html" %}

{% block content %}
<!-- <div class="trainings">
    <div class="trainings-info">
        <div class="">Тренировка: <input type="number" name="" id="" value="1" class="trainings-number"></div>
        <div class="date"> <form>
            <input type="date" name="calendar" value="2024-07-13"
                max="2040-06-04" min="2020-05-29">
           </form>
        </div>
    </div>
    <div class="lines">
        <div class="trainings-main">
            <form action="" class="exercise-line">
                <form ac class="exercise">
                    <select id="exerc" name="exerc" class="">
                        <option value="run">Run</option>
                        <option value="jump">Jump</option>
                        <option value="throw">Throw</option>
                    </select>
                </form>
                <div class="access-line">
                    <div class="access">
                        <form action="" class="access-item">
                            <label for="">Подход 1</label>
                            <input type="number" placeholder="km">
                            <input type="number" placeholder="time">
                            <input type="button" value="delete" class="access-delete">
                        </form>
                    </div>
                    <div class="access">
                        <form action="" class="access-item">
                            <label for="">Подход 2</label>
                            <input type="number" placeholder="km">
                            <input type="number" placeholder="time">
                            <input type="button" value="delete" class="access-delete">
                        </form>
                    </div>
                    <div class="access">
                        <form action="" class="access-item">
                            <label for="">Подход 3</label>
                            <input type="number" placeholder="km">
                            <input type="number" placeholder="time">
                            <input type="button" value="delete" class="access-delete">
                        </form>
                    </div> 
                    <div class="access">
                        <form action="" class="access-item">
                            <label for="">Подход 4</label>
                            <input type="number" placeholder="km">
                            <input type="number" placeholder="time">
                            <input type="button" value="delete" class="access-delete">
                        </form>
                    </div>
                    <div class="access">
                        <form action="" class="access-item">
                            <label for="">Подход 5</label>
                            <input type="number" placeholder="km">
                            <input type="number" placeholder="time">
                            <input type="button" value="delete" class="access-delete">
                        </form>
                    </div>
                    <div class="access">
                        <form action="" class="access-item">
                            <label for="">Подход 6</label>
                            <input type="number" placeholder="km">
                            <input type="number" placeholder="time">
                            <input type="button" value="delete" class="access-delete">
                        </form>
                    </div>
                    <div class="access-add">
                        <input type="button" value="+" class="plus">
                    </div>
                    <div class="exercise-total">
                        <div class="bold">Сумма подходов:</div>
                        <div class="">30 km</div>
                        <div class="">1час 15мин</div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <input type="button" value="Добавить упражнение" class="exercise-add btn">
    <input type="button" value="Сохранить тренировку" class="training-save btn">


</div> -->


<div class="">
    <a href="/add_training"  class="exercise-add btn block" >Добавить тренировку</a>
    <div class="trainings">
            {% for item in list_trainings%}
                <div class="training-item">
                    <h3> Тренировка:{{ item.name }} {{ item.date }} {{ item.type }} {{item.programm_name }} </h3>
                    <ol>
                        {% for i in list_program %}
                            {% if i.name == item.programm_name %}
                            <li>{{ i.exercise_id.name }}</li>
                            <div class="access-line">
                                    {% for j in list_approach %}
                                        {% if j.training_id.id == item.id and  j.programm_id.id == i.id%}
                                        <form action="setCompleted/" method="POST">
                                            {% csrf_token %}
                                            <div class="access">
                                                <div>  Подход {{ j.number }}</div>
                                                <div>
                                                    {% if j.weight is not None  and  j.quantity is not None%}
                                                        <p>{{ j.weight}} кг / {{ j.quantity}} раз</p>
                                                    {% endif %}
                                                    {% if j.distance is not None  and j.time is not None%}
                                                        <p>{{ j.distance }} км / {{ j.time}} мин</p>
                                                        {% if j.weight is not None %}
                                                            <p> время отдыха: {{ j.time_rest}} мин </p>
                                                        {% endif %}
                                                    {% endif %}
                                                    {% if j.isCompleted %}
                                                        <p>Выполнен</p>
                                                    {% else %}
                                                        <input type="hidden" name="approach_id" value="{{j.id}}">
                                                        <button type="submit">Выполнено</button>
                                                    {% endif %}
                                                    
                                                </div>
                                            </div>
                                        </form>
                                        {% endif %} 
                                    {% endfor%}
                                    <div class="add-approachs hide">
                                        <p>Подход</p>
                                        <form method="POST" action="add_approach/">
                                            {% csrf_token %}
                                            <input type="hidden" name='training_id' value="{{item.id}}">
                                            <input type="hidden" name='programm_id' value="{{i.id}}">
                                            {{ form.number }}<br> 
                                            {{ form.weight }}<br> 
                                            {{ form.quantity }}<br> 
                                            {{ form.distance }}<br> 
                                            {{ form.time }}<br> 
                                            {{ form.time_rest }}<br> 
                                            <span>{{data.error}}</span>
                                            <button type="submit">Сохранить</button>
                                        </form>
                                    </div>
                                    
                                    <div class="d-plus">
                                        <input type="button" value="+" class="plus">
                                    </div>
                                    <div class="minus hide">
                                        <input type="button" value="-" class="plus">
                                    </div>  
                            </div>
                            {% endif %}
                        {% endfor %}
                    </ol>
                    <form method="POST" action="delete_training/">
                        {% csrf_token %}
                        <input type="hidden" name="training_id"  value="{{ item.id }}">
                        <input type="submit" value="Удалить" />
                    </form>
                </div>
            {% endfor %}
        
    </div>
  </div>


{% endblock content %}
